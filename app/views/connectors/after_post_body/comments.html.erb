<% if @topic_view.topic.is_upvotes? %>
  <div class="upvotes-comments">
    <% @topic_view.comments[post.id]&.each_with_index do |comment, i| %>
      <div class="upvotes-comment-row">
        <span class="upvotes-comment-cooked" itemprop="comment"><%= comment.cooked.html_safe %></span>
        <span class="upvotes-comment-info-separator">â€“</span>
        <span class="upvotes-comment-creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <a itemprop="url" href='<%= Discourse.base_url %>/u/<%= comment.user.username %>'><span itemprop="name"><%= comment.user.username %></span></a>
          <time itemprop='datePublished' datetime='<%= comment.created_at.to_formatted_s(:iso8601) %>' class="upvotes-comment-time">
            (<%= l comment.created_at, format: :long %>)
          </time>
        </span>
      </div>
    <% end %>
  </div>

  <%
    reply_count = @topic_view.filtered_posts.count - 1
    if post.post_number == 1 && reply_count > 0
  %>
    <div class="upvotes-answer-count">
      <h3><%= t('topic.upvotes.answer_count', count: reply_count) %></h3>
      <span class="upvotes-answer-count-span" itemprop="answerCount"><%= reply_count %></span>
    </div>
  <% end %>
<% end %>
